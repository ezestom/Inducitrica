---
import { Image } from "astro:assets";
import Cta from "@/layouts/partials/Cta.astro";
import { getEntryBySlug } from "astro:content";
import { AiFillCheckCircle } from "react-icons/ai";

const how_it_works = await getEntryBySlug("how-it-works", "index");
const { perfomance, our_works } = how_it_works.data;
const { title, subtitle } = how_it_works.data;
const page_data = {
  ...how_it_works.data,
  content: how_it_works.body,
};
---

<section>
  <div class="container px-0 lg:!px-2 pt-16">
    {
      our_works.map((item: any, index: number) => (
        <div class="grid grid-cols-1 lg:grid-cols-2 py-4 gap-8">
          {/* Caja de contenido con el primer gradiente */}
          <div
            class={`flex flex-col bg-gradient-to-t from-[#e6f6ee]/50 to-[#8bcfad]/50 lg:rounded-3xl p-8 lg:p-12 h-full w-full ${index % 2 === 0 ? "lg:order-1" : "lg:order-2"}`}>
            <h5 class="text-base lg:text-xl font-semibold text-start text-pretty">
              {item.title}
            </h5>
            <ul class="mt-6 text-dark lg:-ml-4">
              {item.list.map((list: any, listIndex: number) => (
                <li class="mb-2 flex items-center rounded text-base lg:px-4 lg:text-xl">
                  <AiFillCheckCircle className="mr-3 fill-primary text-white" />
                  {list}
                </li>
              ))}
            </ul>
          </div>

          {/* Caja de imagen con el segundo gradiente */}
          <div
            class={`flex-shrink-0 lg:w-full rounded-3xl from-[#e6f6ee]/50 to-[#8bcfad]/50 p-6 ${index % 2 === 0 ? "order-2" : "order-1"}`}>
            <img
              src={item.image}
              alt={`Imagen de ${item.title}`}
              class="mx-auto h-auto rounded-3xl object-cover drop-shadow-lg"
            />
          </div>
        </div>
      ))
    }
  </div>
</section>

<section class="page-hero my-32">
  <div class="container">
    <div class="mx-auto text-center"></div>
    <div class="flex-wrap grid gap-8 lg:grid-cols-3">
      {
        perfomance.map((item: any, i: number) => (
          <div
            id="card"
            class={`relative flex flex-col justify-between rounded-xl overflow-hidden bg-white shadow-lg  ${
              perfomance.length - 1 !== i
                ? "after:absolute after:-right-4 after:-z-[1] after:hidden after:w-full after:translate-x-full after:border-b-2 after:border-dashed after:border-primary/50 after:content-[''] md:after:block"
                : undefined
            }`}>
            {/* Contenedor de imagen y contenido */}
            <div class="flex flex-col h-full">
              <Image
                width={400}
                height={400}
                src={item.image}
                alt=""
                class="w-full rounded-t-md object-cover h-[250px] object-center"
              />
              <div class="p-8  text-center h-full">
                <h4 class="h4 pb-4 text-start">{item.title}</h4>
                <p class="text-sm text-pretty !text-black/50 text-start">
                  {item.description}
                </p>
              </div>
            </div>
          </div>
        ))
      }
    </div>
  </div>
</section>
